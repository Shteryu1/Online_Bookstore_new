-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Хост: 127.0.0.1
-- Време на генериране:  4 март 2025 в 11:18
-- Версия на сървъра: 10.4.32-MariaDB
-- Версия на PHP: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- База данни: `online_bookstore`
--

-- --------------------------------------------------------

--
-- Структура на таблица `addresses`
--

CREATE TABLE `addresses` (
  `id` int(11) NOT NULL,
  `street` varchar(255) NOT NULL,
  `city` varchar(100) NOT NULL,
  `state` varchar(100) DEFAULT NULL,
  `zip` varchar(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Структура на таблица `authors`
--

CREATE TABLE `authors` (
  `id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Схема на данните от таблица `authors`
--

INSERT INTO `authors` (`id`, `name`) VALUES
(1, 'Николай Курдюмов'),
(2, 'Крафт фон Хайниц'),
(3, 'Георг Меркенс'),
(4, 'Луц Рьолке'),
(5, 'Бернд Шулц'),
(6, 'Герд Гросман'),
(7, 'Хайнц Любе'),
(8, 'Франц Бьомих'),
(9, 'Дитер Кемпфер'),
(10, 'Холгер Доп'),
(11, 'Халина Хайц'),
(12, 'Зигфрид Колер'),
(13, 'Франк Хърбърт'),
(14, 'Орсън Скот Кард'),
(15, 'Дж. Р. Р. Толкин'),
(16, 'Джордж Р. Р. Мартин'),
(17, 'Джордж Оруел'),
(18, 'Рей Бредбъри'),
(19, 'Дан Симънс'),
(20, 'Дъглас Адамс'),
(21, 'Мери Шели'),
(22, 'Стивън Кинг'),
(23, 'Агата Кристи'),
(24, 'Томас Харис'),
(25, 'Стиг Ларшон'),
(26, 'Дан Браун'),
(27, 'Реймънд Чандлър'),
(28, 'Робърт Блох'),
(29, 'Алекс Майкълидис'),
(30, 'Робърт Галбрейт'),
(31, 'Джилиан Флин'),
(32, 'Джейн Остин'),
(33, 'Лев Толстой'),
(34, 'Маргарет Мичъл'),
(35, 'Никълъс Спаркс'),
(36, 'Робърт Джеймс Уолър'),
(37, 'Иби Зобой'),
(38, 'Сара Джио'),
(39, 'Джон Грийн'),
(40, 'Габриел Гарсия Маркес'),
(41, 'Сесилия Ахърн'),
(42, 'Фьодор Достоевски'),
(43, 'Ф. Скот Фицджералд'),
(44, 'Михаил Булгаков'),
(45, 'Джон Стайнбек'),
(46, 'Албер Камю'),
(47, 'Джордж Елиът'),
(48, 'Вирджиния Улф'),
(49, 'Шарлот Бронте'),
(50, 'Емили Бронте'),
(51, 'Иван Вазов'),
(52, 'Димитър Димов'),
(53, 'Димитър Талев'),
(54, 'Алеко Константинов'),
(55, 'Антон Дончев'),
(56, 'Емилиян Станев'),
(57, 'Захарий Стоянов'),
(58, 'Блага Димитрова'),
(59, 'Захари Карабашлиев'),
(60, 'Виктория Бешлийска'),
(61, 'Мария Касимова-Моасе'),
(62, 'Джеф Кини'),
(63, 'Маргарета Магнусон'),
(64, 'Дъглас Адамс'),
(65, 'Ярослав Хашек'),
(66, 'Александър Дюма'),
(67, 'Илф и Петров'),
(68, 'Михаил Булгаков'),
(69, 'Джеймс Джойс'),
(70, 'Арт Шпигелман'),
(71, 'Алън Мур'),
(72, 'Дейв Гибънс'),
(73, 'Дейвид Лойд'),
(74, 'Нийл Геймън'),
(75, 'Макс Бралиър'),
(76, 'Франк Милър'),
(77, 'Брайън К. Вон'),
(78, 'Фиона Стейпълс'),
(79, 'Маржан Сатрапи'),
(80, 'Брайън Лий О\'Мали'),
(81, 'Майк Миньола'),
(82, 'Чарлз Дюиг'),
(83, 'Евелин Триболи'),
(84, 'Елизабет Ресч'),
(85, 'Памела Дракърман'),
(86, 'Джон Готман'),
(87, 'Даниел Сийгъл'),
(88, 'Тина Пейн Брайсън'),
(89, 'Робин Скинър'),
(90, 'Джон Клийз'),
(91, 'Д-р Хаим Гинът'),
(92, 'Бесел ван дер Колк'),
(93, 'Ла Лече Лига'),
(94, 'Даниел Канеман'),
(95, 'Екхарт Толе'),
(96, 'Густав Льобон'),
(97, 'Даниел Голман'),
(98, 'Джон Грей'),
(99, 'Брене Браун'),
(100, 'Дейл Карнеги'),
(101, 'Хорхе Букай'),
(102, 'Ален де Ботон'),
(103, 'Далай Лама'),
(104, 'Хауърд Кътлър'),
(105, 'Ювал Ноа Харари'),
(106, 'Джаред Даймънд'),
(107, 'Нийл Фъргюсън'),
(108, 'Умберто Еко'),
(109, 'Бил Брайсън'),
(110, 'Ерик Уайнър'),
(111, 'Ейми Чуа'),
(112, 'Самюъл Хънтингтън'),
(113, 'Доминик Моаси'),
(114, 'Ернст Гомбрих'),
(115, 'Майкъл Фрийман'),
(116, 'Рудолф Арнхайм'),
(117, 'Андреа Бочели'),
(118, 'Шарлот Котън'),
(119, 'Дейвид Мамет'),
(120, 'Доналд Граут'),
(121, 'Клод Палиска'),
(122, 'Елизабет Лундбърг'),
(123, 'Майкъл Кьониг'),
(124, 'Андрей Тарковски'),
(125, 'Норман Винсънт Пийл'),
(126, 'Пол Дейвис'),
(127, 'Уилям Пол Йънг'),
(128, 'Чарлз Тарт'),
(129, 'Беинса Дуно'),
(130, 'Клеър Хамилтън'),
(131, 'Стийв Еди'),
(132, 'Сун Дзъ'),
(133, 'Лоран Гунел'),
(134, 'Йеспер Юл'),
(135, 'Д-р Уейн Дайър'),
(136, 'Тим Ву'),
(137, 'Бил Гейтс'),
(138, 'Робърт Кийосаки'),
(139, 'Питър Дракър'),
(140, 'Маркъс Бъкингам'),
(141, 'Кърт Кофман'),
(142, 'Лорейн Грабс Уест'),
(143, 'Джим Колинс'),
(144, 'Уилям Лазиер'),
(145, 'Дош'),
(146, 'Макгрегър'),
(147, 'Максим Батирев'),
(148, 'Уил Кокръл'),
(149, 'Галя Щърбева'),
(150, 'Ваня Василева'),
(151, 'Патриша Шулц'),
(152, 'Джулия Камерън'),
(153, 'Ален де Ботон'),
(154, 'Джералд Даръл'),
(155, 'Вера Николова'),
(156, 'Атанас Казаков');

-- --------------------------------------------------------

--
-- Структура на таблица `books`
--

CREATE TABLE `books` (
  `id` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `author_id` int(11) NOT NULL,
  `genre_id` int(11) NOT NULL,
  `price` decimal(10,2) NOT NULL,
  `image` varchar(255) DEFAULT NULL,
  `description` text DEFAULT NULL,
  `stock` int(11) NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Схема на данните от таблица `books`
--

INSERT INTO `books` (`id`, `title`, `author_id`, `genre_id`, `price`, `image`, `description`, `stock`) VALUES
(1, 'Домашна биоградина: Съвети за начинаещи градинари', 1, 1, 14.99, 'bio_garden.jpg', 'Тази книга предоставя практично ръководство за създаване и поддържане на екологична градина у дома, като се фокусира върху органичните методи на отглеждане. Описани са основните стъпки – от подготовката на почвата и създаването на компост до избора на подходящи растения и естествени техники за торене. Включени са ефективни начини за защита на културите от вредители и болести чрез използване на природосъобразни средства като билкови отвари и полезни насекоми. Разглеждат се също така напояването, мулчирането и сеитбооборотът, които допринасят за поддържането на здрава и плодородна почва. Чрез практически примери и вдъхновяващи истории се показва, че всеки може да създаде своя собствена биоградина, независимо от наличното пространство.', 10),
(2, 'Наръчник по екологично градинарство', 2, 1, 18.50, 'eco_gardening.jpg', 'Тази книга представя основните принципи на природосъобразното градинарство, като акцентира върху създаването на устойчиви и самоподдържащи се екосистеми. Описани са методи за подобряване на почвата чрез компостиране, мулчиране и използване на зелено торене, които подпомагат естественото плодородие. Включени са техники за борба с вредителите и болестите по растенията чрез биологични средства, като например полезни насекоми и отвари от билки. Разгледани са начини за ефективно напояване, оптимално разпределение на растенията и планиране на градината според принципите на пермакултурата. Освен практически съвети, книгата съдържа вдъхновяващи примери за успешни екологични градини, които доказват, че природосъобразният подход е не само полезен, но и продуктивен.', 8),
(3, 'Орхидеи', 4, 1, 20.00, 'orchids.jpg', 'Тази книга разкрива тайните на отглеждането и грижата за едни от най-красивите и екзотични цветя в света. Подробно са описани различните видове орхидеи, техните специфични изисквания към светлина, влажност и температура, както и подходящите методи за торене. Включени са ценни насоки за пресаждане, размножаване и поддържане на здрави растения, като се обръща специално внимание на предотвратяването и лечението на заболявания. Представени са техники за стимулиране на цъфтежа, както и съвети за избор на подходящи съдове и субстрати за различните видове. Чрез богат илюстративен материал читателят може да се запознае с особеностите на всяка разновидност и да създаде перфектните условия за тяхното развитие.', 12),
(4, 'Резитба и облагородяване на овощни дървета и храсти', 5, 1, 22.99, 'tree_pruning.jpg', 'Книгата предлага изчерпателно ръководство за правилната резитба и присаждане на овощни дървета и храсти, което спомага за по-добрия им растеж и по-висок добив. Разяснени са основните техники за формираща, поддържаща и подмладяваща резитба, както и най-доброто време за тяхното извършване. Подробно са описани различните методи за облагородяване, включително копулация, окулиране и присаждане на калеми, като всяка техника е илюстрирана за по-голяма яснота. Дадени са конкретни препоръки за отделните овощни видове, съобразени с техните специфични нужди и особености на развитие. Освен теоретичната част, книгата съдържа практически примери и полезни съвети за постигане на здрави и продуктивни градини.', 7),
(5, 'Градински цветя', 7, 1, 19.99, 'garden_flowers.jpg', 'Тази книга е изчерпателно ръководство за разнообразието от цветя, които могат да се отглеждат в градината, като се обръща внимание на тяхната естетическа и декоративна стойност. Описани са различни видове многогодишни и едногодишни цветя, техните изисквания към почвата, светлината и напояването, както и най-добрите условия за тяхното отглеждане. Разгледани са методи за комбиниране на различни цветя с цел създаване на хармонични цветни композиции през различните сезони. Включени са съвети за предпазване от болести и вредители, както и начини за удължаване на периода на цъфтеж. Чрез детайлни описания и богата фотографска селекция, книгата вдъхновява градинарите да създадат пъстри и живописни цветни лехи.', 15),
(6, 'Наръчник за любителя градинар', 8, 1, 16.50, 'gardener_guide.jpg', 'Това практическо ръководство предоставя основни знания за градинарството, подходящи както за начинаещи, така и за напреднали ентусиасти. Разгледани са важни теми като обработка на почвата, избор на растения, напояване, торене и защита от вредители. Описани са различни методи за засаждане и размножаване, включително най-добрите техники за отглеждане на зеленчуци, плодове и декоративни растения. Включени са сезонни препоръки за поддържане на градината през цялата година, както и идеи за създаване на красиви и функционални градински пространства. Освен практическите съвети, книгата предоставя вдъхновяващи истории и полезни трикове за по-ефективно градинарство.', 10),
(7, 'Палми', 9, 1, 21.99, 'palms.jpg', 'Тази книга представя богатото разнообразие от палмови видове и тяхното успешно отглеждане в различни климатични условия. Обяснени са специфичните изисквания на палмите към светлина, влага и почва, както и най-подходящите методи за тяхното торене и напояване. Разгледани са начини за размножаване чрез семена и вегетативни методи, както и правилни техники за пресаждане и поддържане на здрави растения. Описани са често срещаните болести и вредители, заедно с природосъобразни методи за тяхното овладяване. Чрез детайлни описания и цветни илюстрации читателят може лесно да избере подходящите видове палми за своя дом, градина или оранжерия.', 8),
(8, 'Кактуси', 10, 1, 17.50, 'cactus.jpg', 'Книгата предоставя полезна информация за различните видове кактуси, техния естествен хабитат и начините за успешно отглеждане в домашни условия. Описани са основните изисквания за светлина, почва и поливане, както и най-добрите техники за размножаване чрез семена и резници. Включени са съвети за справяне с болести и вредители, както и методи за стимулиране на цъфтежа при някои видове. Подробно са разгледани декоративните възможности на кактусите и тяхната употреба в интериорния и екстериорния дизайн. С помощта на богат илюстративен материал читателите могат да се вдъхновят за създаването на красиви и екзотични колекции.', 12),
(9, 'Балконски цветя', 11, 1, 15.99, 'balcony_flowers.jpg', 'Тази книга е идеалният наръчник за всички, които искат да превърнат балкона си в цветен и уютен кът за отдих. Представени са различни видове цветя, подходящи за отглеждане в контейнери и саксии, както и съвети за тяхното правилно комбиниране. Описани са техники за торене, поливане и поддръжка на растенията, за да се осигури обилен и продължителен цъфтеж. Разгледани са идеи за вертикално озеленяване и оптимално използване на ограниченото пространство. Чрез практически примери и красиви илюстрации книгата вдъхновява любителите на цветята да създадат живописен и хармоничен балкон.', 14),
(10, 'Бонсаи', 12, 1, 24.99, 'bonsai.jpg', 'Тази книга представя изкуството на бонсаите, като обяснява стъпка по стъпка как да се създаде и поддържа миниатюрно дърво. Разгледани са различните стилове и техники за оформяне, включително резитба, телене и прищипване, които помагат за създаването на хармонични форми. Описани са правилните условия за отглеждане, като светлина, влажност и почва, необходими за здравословното развитие на дърветата. Включени са съвети за поливане, подхранване и справяне с болести и вредители, които могат да засегнат миниатюрните растения. Със своите детайлни инструкции и вдъхновяващи примери, книгата е чудесно ръководство както за начинаещи, така и за напреднали любители на бонсаите.', 6);

-- --------------------------------------------------------

--
-- Структура на таблица `genres`
--

CREATE TABLE `genres` (
  `id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Схема на данните от таблица `genres`
--

INSERT INTO `genres` (`id`, `name`) VALUES
(1, 'Дом, градина и хоби'),
(2, 'Научна фантастика, фентъзи и хорър'),
(3, 'Криминални и трилъри'),
(4, 'Романтични'),
(5, 'Световна проза'),
(6, 'Българска литература'),
(7, 'Хумор'),
(8, 'Комикси'),
(9, 'Здраве и семейство'),
(10, 'Популярна психология'),
(11, 'История, културология и публицистика'),
(12, 'Изкуство, фотография, кино, музика'),
(13, 'Духовност, митология, езотерика'),
(14, 'Бизнес'),
(15, 'Туризъм и спорт');

-- --------------------------------------------------------

--
-- Структура на таблица `orders`
--

CREATE TABLE `orders` (
  `id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `total_price` decimal(10,2) NOT NULL,
  `order_date` timestamp NOT NULL DEFAULT current_timestamp(),
  `status` enum('pending','shipped','delivered','cancelled') NOT NULL DEFAULT 'pending'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Структура на таблица `order_details`
--

CREATE TABLE `order_details` (
  `id` int(11) NOT NULL,
  `order_id` int(11) NOT NULL,
  `book_id` int(11) NOT NULL,
  `quantity` int(11) NOT NULL,
  `price` decimal(10,2) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Структура на таблица `users`
--

CREATE TABLE `users` (
  `id` int(11) NOT NULL,
  `username` varchar(50) NOT NULL,
  `email` varchar(100) NOT NULL,
  `password` varchar(255) NOT NULL,
  `address_id` int(11) DEFAULT NULL,
  `role` enum('admin','customer') NOT NULL DEFAULT 'customer'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Indexes for dumped tables
--

--
-- Индекси за таблица `addresses`
--
ALTER TABLE `addresses`
  ADD PRIMARY KEY (`id`);

--
-- Индекси за таблица `authors`
--
ALTER TABLE `authors`
  ADD PRIMARY KEY (`id`);

--
-- Индекси за таблица `books`
--
ALTER TABLE `books`
  ADD PRIMARY KEY (`id`),
  ADD KEY `author_id` (`author_id`),
  ADD KEY `genre_id` (`genre_id`);

--
-- Индекси за таблица `genres`
--
ALTER TABLE `genres`
  ADD PRIMARY KEY (`id`);

--
-- Индекси за таблица `orders`
--
ALTER TABLE `orders`
  ADD PRIMARY KEY (`id`),
  ADD KEY `user_id` (`user_id`);

--
-- Индекси за таблица `order_details`
--
ALTER TABLE `order_details`
  ADD PRIMARY KEY (`id`),
  ADD KEY `order_id` (`order_id`),
  ADD KEY `book_id` (`book_id`);

--
-- Индекси за таблица `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `username` (`username`),
  ADD UNIQUE KEY `email` (`email`),
  ADD KEY `address_id` (`address_id`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `addresses`
--
ALTER TABLE `addresses`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `authors`
--
ALTER TABLE `authors`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=157;

--
-- AUTO_INCREMENT for table `books`
--
ALTER TABLE `books`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=11;

--
-- AUTO_INCREMENT for table `genres`
--
ALTER TABLE `genres`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=16;

--
-- AUTO_INCREMENT for table `orders`
--
ALTER TABLE `orders`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `order_details`
--
ALTER TABLE `order_details`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `users`
--
ALTER TABLE `users`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- Ограничения за дъмпнати таблици
--

--
-- Ограничения за таблица `books`
--
ALTER TABLE `books`
  ADD CONSTRAINT `books_ibfk_1` FOREIGN KEY (`author_id`) REFERENCES `authors` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `books_ibfk_2` FOREIGN KEY (`genre_id`) REFERENCES `genres` (`id`) ON DELETE CASCADE;

--
-- Ограничения за таблица `orders`
--
ALTER TABLE `orders`
  ADD CONSTRAINT `orders_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;

--
-- Ограничения за таблица `order_details`
--
ALTER TABLE `order_details`
  ADD CONSTRAINT `order_details_ibfk_1` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `order_details_ibfk_2` FOREIGN KEY (`book_id`) REFERENCES `books` (`id`) ON DELETE CASCADE;

--
-- Ограничения за таблица `users`
--
ALTER TABLE `users`
  ADD CONSTRAINT `users_ibfk_1` FOREIGN KEY (`address_id`) REFERENCES `addresses` (`id`) ON DELETE SET NULL;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
